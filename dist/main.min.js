"use strict";function o(e){return i(e)||t(e)||n(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,r){if(e){if("string"==typeof e)return s(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,r):void 0}}function t(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function i(e){if(Array.isArray(e))return s(e)}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function a(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.push.apply(t,n)),t}function c(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){l(r,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function l(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function e(e){throw new Error('"'+e+'" is read-only')}var u=require("path"),p=require("fs"),m=require("process"),d=require("glob"),f=m.cwd(),g=u.resolve(f,"src/pages"),b=g.length+1,y=require("simple-progress-webpack-plugin"),h=require("compression-webpack-plugin"),O=require("webpack-bundle-analyzer"),w=O.BundleAnalyzerPlugin,j=require("terser-webpack-plugin"),k=require("optimize-css-assets-webpack-plugin"),v=["examples"],S=function(i,o){var e,r,n,t=d.sync(g+"/*/main.js"),s={},a=[];return o||i||(e=u.resolve(f,"config/local.json"),p.existsSync(e)&&(r=p.readFileSync(e),(n=JSON.parse(r.toString()).modules)&&0<n.length&&n.map(function(e){a.includes(e.split("_")[0])||a.push(e.split("_")[0])}))),t.forEach(function(e){var r,n,t=u.dirname(e).substr(b);(o||i||a.includes(t))&&(r=u.resolve("".concat(g,"/").concat(t,"/env.json")),n={title:"首页",keywords:null,description:null},p.existsSync(r)&&(n=Object.assign({},n,JSON.parse(p.readFileSync(r).toString()))),i&&v.includes(t)||(s[t]=Object.assign({},n,{entry:"src/pages/".concat(t,"/main.js"),template:"public/".concat("login"===t?"login":"index",".html"),filename:"".concat(t,i?"/index.html":".html"),chunks:["vendors","commons",t]})))}),s};exports.pages=S,exports.merge=function(n,t){e("prePageExclude"),v=v.concat(t.prePageExclude||[]);var i=S(n);return{publicPath:t.prefix(n),outputDir:"dist",assetsDir:"static",pages:i,indexPath:"index.html",productionSourceMap:!n,chainWebpack:function(e){t.alias(e),Object.keys(i).forEach(function(r){e.plugin("html-".concat(r)).tap(function(e){return e[0].cdn=t.static(t.prefix(n))(r),e})});var r=c(c({},e.module.rule("scss").toConfig().oneOf[3]),{},{test:/\.useable.scss$/});r.use=o(r.use),r.use[0]={loader:"style-loader",options:{injectType:"lazyStyleTag"}},e.module.rule("scss").merge({oneOf:[r]}),e.module.rule("md").test(/\.md/).use("html-loader").loader("html-loader").end().use("markdown-loader").loader("markdown-loader").end(),t.chainWebpack&&"function"==typeof t.chainWebpack&&t.chainWebpack(e)},configureWebpack:function(e){e.externals=t.externals,e.performance={hints:"warning",maxEntrypointSize:5e7,maxAssetSize:3e7,assetFilter:function(e){return e.endsWith(".js")}},n&&e.plugins.push(new h({filename:"[path].gz[query]",algorithm:"gzip",test:new RegExp("\\.("+["html","js","css"].join("|")+")$"),threshold:10240,minRatio:.6,deleteOriginalAssets:!1}),new w({openAnalyzer:!1,analyzerMode:"static"})),e.optimization={splitChunks:{chunks:"all",minSize:3e4,maxInitialRequests:1/0,minChunks:1,maxAsyncRequests:5,automaticNameDelimiter:".",name:!1,cacheGroups:{commons:{name:"commons",priority:1,chunks:"initial",minSize:0,minChunks:1},vendors:{name:"vendors",priority:2,test:/[\\/]node_modules[\\/]/,chunks:"initial",minSize:0,minChunks:1}}},minimizer:[new j({cache:!0,parallel:!0,sourceMap:!1,terserOptions:{compress:{drop_console:t.dropConsole,drop_debugger:t.dropDebugger}}}),new k({cssProcessorOptions:{safe:!0}})]},e.plugins.push(new y({format:"minimal"})),t.configureWebpack&&"function"==typeof t.configureWebpack&&t.configureWebpack(e)},devServer:t.devServer,parallel:1<require("os").cpus().length}};