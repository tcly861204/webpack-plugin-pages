"use strict";function t(e){return s(e)||i(e)||r(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,n){if(e){if("string"==typeof e)return a(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,n):void 0}}function i(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function s(e){if(Array.isArray(e))return a(e)}function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function o(n,e){var t,r=Object.keys(n);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(n),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)),r}function c(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach(function(e){u(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var l=require("path"),p=require("fs"),m=require("webpack"),h=require("process"),g=require("glob"),f=h.cwd(),d=l.resolve(f,"src/pages"),b=d.length+1,y=require("hard-source-webpack-plugin"),k=require("simple-progress-webpack-plugin"),j=require("compression-webpack-plugin"),e=require("webpack-bundle-analyzer"),w=e.BundleAnalyzerPlugin,v=require("terser-webpack-plugin"),O=require("webpack-plugin-banner"),x=require("optimize-css-assets-webpack-plugin"),S=require("webpack-manifest-plugin"),q=["examples"],z={};p.existsSync(l.resolve(f,"app.config.js"))&&(z=require(l.resolve(f,"app.config.js")));var C=function(i,s){var e,n,t,r=g.sync(d+"/*/main.js"),a={},o=[];return s||i||(e=l.resolve(f,"config/local.json"),p.existsSync(e)&&(n=p.readFileSync(e),(t=JSON.parse(n.toString()).modules)&&0<t.length&&t.map(function(e){o.includes(e.split("_")[0])||o.push(e.split("_")[0])}))),r.forEach(function(e){var n,t,r=l.dirname(e).substr(b);(s||i||o.includes(r))&&(n=l.resolve("".concat(d,"/").concat(r,"/env.json")),t={title:"首页",keywords:null,description:null},p.existsSync(n)&&(t=Object.assign({},t,JSON.parse(p.readFileSync(n).toString()))),i&&q.includes(r)||(a[r]=Object.assign({},t,{entry:"src/pages/".concat(r,"/main.js"),template:"public/".concat("login"===r?"login":"index",".html"),filename:"".concat(r,i?"/index.html":".html"),chunks:["common_".concat(r),"vendors",r,"login"!==r&&"components","libs","manifest","login"!==r&&"layout","login"!==r&&"sidebar"]})))}),a};exports.pages=C,exports.merge=function(i,s){s.prePageExclude&&s.prePageExclude.length&&s.prePageExclude.map(function(e){return q.push(e),e});var a=C(i);return{publicPath:s.prefix(i),outputDir:"dist",assetsDir:"static",filenameHashing:!1,runtimeCompiler:!1,transpileDependencies:[],pages:a,indexPath:"index.html",productionSourceMap:!i,css:{extract:{filename:"static/css/[name].[contenthash:8].css",chunkFilename:"static/css/[name].[contenthash:8].css"},sourceMap:!1},chainWebpack:function(e){s.alias(e),Object.keys(a).forEach(function(n){e.plugin("html-".concat(n)).tap(function(e){return e[0].cdn=s.static(s.prefix(i))(n),e}),e.plugins.delete("prefetch-".concat(n)),e.plugins.delete("preload-".concat(n))});var n=c(c({},e.module.rule("scss").toConfig().oneOf[3]),{},{test:/\.useable.scss$/});n.use=t(n.use),n.use[0]={loader:"style-loader",options:{injectType:"lazyStyleTag"}},e.module.rule("scss").merge({oneOf:[n]}),e.module.rule("md").test(/\.md/).use("html-loader").loader("html-loader").end().use("markdown-loader").loader("markdown-loader").end(),s.chainWebpack&&"function"==typeof s.chainWebpack&&s.chainWebpack(e)},configureWebpack:function(e){e.externals=s.externals,e.performance={hints:"warning",maxEntrypointSize:5e7,maxAssetSize:3e7,assetFilter:function(e){return e.endsWith(".js")}},i&&e.plugins.push(new j({filename:"[path].gz[query]",algorithm:"gzip",test:new RegExp("\\.("+["html","js","css"].join("|")+")$"),threshold:10240,minRatio:.6,deleteOriginalAssets:!1}),new w({openAnalyzer:!1,analyzerMode:"static"}));var t,n=Object.keys(a);e.optimization={splitChunks:{chunks:"all",minSize:3e4,maxInitialRequests:1/0,minChunks:1,maxAsyncRequests:5,automaticNameDelimiter:".",name:!1,cacheGroups:(t={vendors:{name:"vendors",filename:"static/js/[name]-[contenthash:8].js",priority:2,test:/[\\/]node_modules[\\/]/,chunks:"initial",minSize:0,minChunks:1,reuseExistingChunk:!0},layout:{name:"layout",filename:"static/js/[name]-[contenthash:8].js",priority:3,test:/[\\/]src[\\/]layout[\\/]/,chunks:"initial",minSize:0,minChunks:1,reuseExistingChunk:!0},sidebar:{name:"sidebar",filename:"static/js/[name]-[contenthash:8].js",priority:4,test:/[\\/]src[\\/]layout[\\/]main[\\/]sidebar[\\/]/,chunks:"initial",minSize:0,minChunks:1,reuseExistingChunk:!0},components:{name:"components",filename:"static/js/[name]-[contenthash:8].js",priority:5,test:/[\\/]src[\\/]components[\\/]common[\\/]/,chunks:function(e){return!["login"].includes(e.name)},minSize:0,minChunks:1,reuseExistingChunk:!0},libs:{name:"libs",filename:"static/js/[name]-[contenthash:8].js",priority:6,test:/[\\/]src[\\/]libs[\\/]/,chunks:"initial",minSize:0,minChunks:1,reuseExistingChunk:!0}},n.map(function(n){t["common_".concat(n)]={name:"common_".concat(n),filename:"static/js/[name]-[contenthash:8].js",priority:1,chunks:function(e){return[n].includes(e.name)},minSize:0,minChunks:1}}),t)},runtimeChunk:{name:"manifest"},minimizer:[new v({cache:!0,parallel:!0,sourceMap:!1,terserOptions:{compress:{drop_console:s.dropConsole,drop_debugger:s.dropDebugger}}}),new x({assetNameRegExp:/\.css$/g,cssProcessor:require("cssnano"),cssProcessorOptions:{safe:!0,discardComments:{removeAll:!0}},canPrint:!0})]},e.plugins.push(new k({format:"minimal"}));try{var r=z[h.env.env||"default"];r&&e.plugins.push(new m.DefinePlugin(r))}catch(e){}i?(e.plugins.push(new S),e.plugins.push(new O)):e.plugins.push(new y),s.configureWebpack&&"function"==typeof s.configureWebpack&&s.configureWebpack(e)},devServer:s.devServer,parallel:1<require("os").cpus().length}};